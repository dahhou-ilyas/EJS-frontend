# Utiliser l'image de base jenkins/agent:alpine-jdk11
FROM jenkins/agent:alpine-jdk11

# Passer à l'utilisateur root pour avoir les permissions nécessaires
USER root

# Installer Node.js version 18
RUN apk add --no-cache bash curl nodejs npm

# Revenir à l'utilisateur jenkins
USER jenkins

# Définir le point d'entrée pour l'agent Jenkins
ENTRYPOINT ["/usr/local/bin/jenkins-agent"]