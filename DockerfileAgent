# Utiliser l'image de base jenkins/agent:alpine-jdk11
FROM jenkins/agent:alpine-jdk11

# Passer à l'utilisateur root pour avoir les permissions nécessaires
USER root

# Installer Node.js version 18
RUN apk add --no-cache \
    curl \
    && curl -fsSL https://nodejs.org/dist/v18.17.1/node-v18.17.1-linux-x64.tar.xz | tar -xJ -C /usr/local --strip-components=1 --no-same-owner \
    && apk del curl

# Revenir à l'utilisateur jenkins
USER jenkins
